import { getLocation } from '@/comm/geotools'

const temp = {
	t:0,
	coord: [
    [
        121.548262,
        29.646546,
        415
    ],
    [
        121.548175,
        29.6466,
        412
    ],
    [
        121.548073,
        29.646639,
        407
    ],
    [
        121.547987,
        29.646698,
        406
    ],
    [
        121.547889,
        29.646743,
        403
    ],
    [
        121.547788,
        29.646719,
        400
    ],
    [
        121.547688,
        29.646681,
        396
    ],
    [
        121.547597,
        29.646636,
        393
    ],
    [
        121.547521,
        29.646572,
        389
    ],
    [
        121.547451,
        29.646505,
        386
    ],
    [
        121.547389,
        29.64643,
        383
    ],
    [
        121.547313,
        29.646362,
        380
    ],
    [
        121.547235,
        29.646423,
        378
    ],
    [
        121.547169,
        29.646494,
        378
    ],
    [
        121.547101,
        29.646564,
        377
    ],
    [
        121.547024,
        29.64663,
        374
    ],
    [
        121.546957,
        29.6467,
        372
    ],
    [
        121.546878,
        29.646759,
        369
    ],
    [
        121.546777,
        29.646801,
        366
    ],
    [
        121.546693,
        29.646864,
        363
    ],
    [
        121.546594,
        29.6469,
        360
    ],
    [
        121.546488,
        29.646881,
        356
    ],
    [
        121.546372,
        29.646885,
        351
    ],
    [
        121.546263,
        29.646906,
        348
    ],
    [
        121.546158,
        29.64689,
        347
    ],
    [
        121.546123,
        29.646802,
        346
    ],
    [
        121.546181,
        29.646721,
        346
    ],
    [
        121.546196,
        29.64663,
        346
    ],
    [
        121.546183,
        29.646534,
        342
    ],
    [
        121.54617,
        29.646442,
        339
    ],
    [
        121.54613,
        29.646358,
        334
    ],
    [
        121.54618,
        29.646272,
        332
    ],
    [
        121.546243,
        29.646199,
        332
    ],
    [
        121.546313,
        29.646123,
        331
    ],
    [
        121.546357,
        29.646041,
        330
    ],
    [
        121.546396,
        29.645955,
        329
    ],
    [
        121.546397,
        29.64586,
        327
    ],
    [
        121.546344,
        29.645774,
        321
    ],
    [
        121.54635,
        29.645678,
        319
    ],
    [
        121.546336,
        29.64558,
        317
    ],
    [
        121.546283,
        29.645497,
        314
    ],
    [
        121.546183,
        29.645527,
        306
    ],
    [
        121.546155,
        29.64562,
        306
    ],
    [
        121.54605,
        29.645624,
        304
    ],
    [
        121.545972,
        29.645554,
        300
    ],
    [
        121.545976,
        29.645458,
        293
    ],
    [
        121.545942,
        29.645372,
        290
    ],
    [
        121.545916,
        29.645284,
        287
    ],
    [
        121.545829,
        29.645234,
        283
    ],
    [
        121.545751,
        29.645168,
        278
    ],
    [
        121.5458,
        29.645084,
        271
    ],
    [
        121.545728,
        29.645011,
        267
    ],
    [
        121.545625,
        29.645036,
        263
    ],
    [
        121.545655,
        29.644943,
        259
    ],
    [
        121.545567,
        29.644895,
        253
    ],
    [
        121.545465,
        29.644916,
        248
    ],
    [
        121.545421,
        29.644833,
        242
    ],
    [
        121.545378,
        29.644751,
        238
    ],
    [
        121.545339,
        29.644662,
        230
    ],
    [
        121.545234,
        29.644658,
        226
    ],
    [
        121.545167,
        29.644586,
        223
    ],
    [
        121.545155,
        29.644495,
        214
    ],
    [
        121.545118,
        29.64441,
        211
    ],
    [
        121.545052,
        29.644337,
        206
    ],
    [
        121.544958,
        29.644295,
        201
    ],
    [
        121.544849,
        29.644288,
        196
    ],
    [
        121.544749,
        29.644264,
        192
    ],
    [
        121.54465,
        29.644302,
        188
    ],
    [
        121.544545,
        29.644304,
        185
    ],
    [
        121.544481,
        29.644375,
        182
    ],
    [
        121.544409,
        29.644452,
        179
    ],
    [
        121.544375,
        29.64454,
        179
    ],
    [
        121.544291,
        29.644486,
        176
    ],
    [
        121.544208,
        29.64443,
        171
    ],
    [
        121.544097,
        29.644403,
        165
    ],
    [
        121.544001,
        29.644365,
        162
    ],
    [
        121.543904,
        29.644315,
        159
    ],
    [
        121.543836,
        29.644246,
        155
    ],
    [
        121.543767,
        29.644176,
        151
    ],
    [
        121.543688,
        29.644115,
        145
    ],
    [
        121.543601,
        29.64406,
        140
    ],
    [
        121.543542,
        29.643982,
        137
    ],
    [
        121.543445,
        29.643939,
        133
    ],
    [
        121.543372,
        29.643876,
        128
    ],
    [
        121.543288,
        29.643818,
        125
    ],
    [
        121.543178,
        29.643802,
        122
    ],
    [
        121.54307,
        29.643784,
        120
    ],
    [
        121.542973,
        29.643745,
        117
    ],
    [
        121.542885,
        29.643697,
        114
    ],
    [
        121.542788,
        29.64366,
        111
    ],
    [
        121.542687,
        29.643641,
        108
    ],
    [
        121.542579,
        29.643628,
        106
    ],
    [
        121.542505,
        29.643692,
        105
    ],
    [
        121.542398,
        29.643701,
        103
    ],
    [
        121.542292,
        29.643701,
        100
    ],
    [
        121.542201,
        29.643746,
        98
    ],
    [
        121.542115,
        29.643801,
        96
    ],
    [
        121.542005,
        29.643821,
        93
    ],
    [
        121.5419,
        29.643809,
        91
    ],
    [
        121.541797,
        29.643786,
        89
    ],
    [
        121.541697,
        29.643747,
        87
    ],
    [
        121.541594,
        29.643722,
        84
    ],
    [
        121.541482,
        29.643724,
        82
    ],
    [
        121.54138,
        29.643757,
        81
    ],
    [
        121.541277,
        29.643763,
        80
    ],
    [
        121.541162,
        29.643772,
        78
    ],
    [
        121.541055,
        29.643759,
        76
    ],
    [
        121.540951,
        29.643741,
        74
    ],
    [
        121.540864,
        29.64369,
        73
    ],
    [
        121.540797,
        29.643767,
        71
    ],
    [
        121.540741,
        29.643846,
        71
    ],
    [
        121.540698,
        29.643933,
        71
    ],
    [
        121.540657,
        29.644016,
        71
    ],
    [
        121.540627,
        29.644105,
        70
    ],
    [
        121.540593,
        29.644195,
        70
    ],
    [
        121.540563,
        29.644282,
        70
    ],
    [
        121.540527,
        29.644367,
        70
    ],
    [
        121.540489,
        29.644457,
        69
    ],
    [
        121.540431,
        29.644545,
        70
    ],
    [
        121.540344,
        29.644603,
        69
    ],
    [
        121.540238,
        29.644647,
        69
    ],
    [
        121.540142,
        29.644686,
        68
    ],
    [
        121.540038,
        29.64472,
        68
    ],
    [
        121.539929,
        29.644749,
        67
    ],
    [
        121.53983,
        29.644789,
        67
    ],
    [
        121.539722,
        29.644797,
        66
    ],
    [
        121.539615,
        29.644787,
        64
    ],
    [
        121.539511,
        29.644767,
        62
    ],
    [
        121.539403,
        29.64476,
        60
    ],
    [
        121.539292,
        29.644754,
        59
    ],
    [
        121.539187,
        29.644726,
        58
    ],
    [
        121.53908,
        29.644745,
        57
    ],
    [
        121.538972,
        29.64477,
        56
    ],
    [
        121.538882,
        29.644815,
        55
    ],
    [
        121.538774,
        29.644827,
        54
    ],
    [
        121.538665,
        29.644862,
        54
    ],
    [
        121.53858,
        29.644802,
        54
    ],
    [
        121.538475,
        29.644768,
        54
    ],
    [
        121.538369,
        29.644774,
        53
    ],
    [
        121.538297,
        29.644852,
        52
    ],
    [
        121.538197,
        29.644894,
        52
    ],
    [
        121.53812,
        29.644964,
        51
    ],
    [
        121.538014,
        29.645009,
        50
    ],
    [
        121.537903,
        29.645044,
        50
    ],
    [
        121.537801,
        29.645072,
        49
    ],
    [
        121.537691,
        29.64505,
        50
    ],
    [
        121.537582,
        29.645019,
        52
    ],
    [
        121.537483,
        29.644965,
        53
    ],
    [
        121.537387,
        29.644898,
        58
    ],
    [
        121.537441,
        29.644976,
        59
    ],
    [
        121.537534,
        29.645017,
        56
    ],
    [
        121.537634,
        29.645067,
        53
    ],
    [
        121.537735,
        29.645109,
        50
    ],
    [
        121.537846,
        29.645123,
        48
    ],
    [
        121.537945,
        29.645092,
        49
    ],
    [
        121.53787,
        29.645162,
        49
    ],
    [
        121.537765,
        29.64515,
        48
    ],
    [
        121.537657,
        29.645151,
        49
    ],
    [
        121.537548,
        29.645167,
        49
    ],
    [
        121.537472,
        29.645231,
        49
    ],
    [
        121.537431,
        29.64532,
        48
    ],
    [
        121.537407,
        29.645409,
        49
    ],
    [
        121.537346,
        29.645495,
        48
    ],
    [
        121.537319,
        29.645585,
        48
    ],
    [
        121.537255,
        29.645666,
        48
    ],
    [
        121.537193,
        29.645749,
        48
    ],
    [
        121.537101,
        29.645801,
        48
    ],
    [
        121.537,
        29.645854,
        49
    ],
    [
        121.536931,
        29.645922,
        49
    ],
    [
        121.536822,
        29.645953,
        47
    ],
    [
        121.536717,
        29.645973,
        46
    ],
    [
        121.536647,
        29.646043,
        45
    ],
    [
        121.536539,
        29.646056,
        44
    ],
    [
        121.536432,
        29.646062,
        44
    ],
    [
        121.536337,
        29.646102,
        43
    ],
    [
        121.536233,
        29.646128,
        43
    ],
    [
        121.536149,
        29.646189,
        42
    ],
    [
        121.536048,
        29.64621,
        42
    ],
    [
        121.535941,
        29.646199,
        41
    ],
    [
        121.535829,
        29.64621,
        40
    ],
    [
        121.535719,
        29.646213,
        40
    ],
    [
        121.535614,
        29.64622,
        40
    ],
    [
        121.535507,
        29.646224,
        40
    ],
    [
        121.535392,
        29.646231,
        40
    ],
    [
        121.535293,
        29.6462,
        41
    ],
    [
        121.535195,
        29.646151,
        40
    ],
    [
        121.535099,
        29.646098,
        39
    ],
    [
        121.535021,
        29.646032,
        39
    ],
    [
        121.535042,
        29.645933,
        39
    ],
    [
        121.535071,
        29.645844,
        39
    ]
]}

const locationModule = {
		temp,
		tim: null,
		stopLocation(){
			clearTimeout(this.tim)
		},
		async startLocation(option, fn){
			// let {p} = await getLocation()
			temp.t ++
			if(temp.t==temp.coord.length) temp.t = 0
			let p = {
				longitude: temp.coord[temp.t][0],
				latitude: temp.coord[temp.t][1]
			}
			
			fn({data: p, success: true})
			this.tim = setTimeout(()=>{
				this.startLocation(option, fn)
			},option.intervalTime)
		},
		
		
		watchPosition(_onSuccess){
			
			temp.t ++
			if(temp.t==temp.coord.length) temp.t = 0
			
			
			console.log(temp.t,window);
			_onSuccess({coords: {
				longitude: temp.coord[temp.t][0],
				latitude: temp.coord[temp.t][1],
				altitude: temp.coord[temp.t][2]
			}})
			
			window.wid = setTimeout(()=> { geolocation.watchPosition(_onSuccess) }, 3999)
			return window.wid
		}
	}
	
module.exports = locationModule